var IDAL={getControlInterfaces:function(){var t=null,r=new Promise(function(e,r){t=e});return window.addEventListener("idal-system-ready",function(e){null!=t?(t(e.detail),t=null):r=Promise.resolve(e.detail)}),function(){return r}}()};!function(){function a(){return Promise.reject({code:-20101,message:"invalid method parameters"})}function m(e,r){var t=new CustomEvent(e,{detail:r});window.setTimeout(function(){window.dispatchEvent(t)},0)}function r(){}function t(){}function n(){this.jobCounter=0}function o(e,r,t){m("idal-printer-event",{type:"job-state",job:{id:e,state:r,message:t}})}function i(){var t="playing",r="stopped",n="paused",o={state:t,filename:"fake video.mp4",folders:[{name:"000 [LOOP] Fake folder",number:0},{name:"001 [LOOP] Fake folder",number:1},{name:"999 [LOOP] Fake folder",number:999}],currentFolderIndex:0,initialTime:(new Date).getTime(),pausedTime:0,duration:120,volume:100,mute:!1};function i(e){return m("idal-player-event",e)}function e(e){o.mute!=e&&i({type:"mute-change",mute:o.mute=e})}function s(){return o.state==n?(o.pausedTime-o.initialTime)/1e3:o.state==t?((new Date).getTime()-o.initialTime)/1e3%o.duration:0}function u(e){i({type:"folder-leave",folder:o.folders[o.currentFolderIndex]}),o.currentFolderIndex=e,i({type:"folder-enter",folder:o.folders[e]}),o.initialTime=(new Date).getTime()}function l(e){e!=o.state&&(e==n&&(o.pausedTime=(new Date).getTime()),e==t&&(o.state==n?o.initialTime=(new Date).getTime()-(o.pausedTime-o.initialTime):o.state==r&&(o.initialTime=(new Date).getTime())),o.state=e)}return{playPause:function(){return o.state==t?l(n):l(t),Promise.resolve(!0)},play:function(){return l(t),Promise.resolve(!0)},stop:function(){return l(r),Promise.resolve(!0)},pause:function(){return o.state==t?(l(n),Promise.resolve(!0)):Promise.resolve(!1)},togglePause:function(){return o.state==n?(l(t),Promise.resolve(!0)):o.state==t?(l(n),Promise.resolve(!0)):Promise.resolve(!1)},resume:function(){return o.state==n?(l(t),Promise.resolve(!0)):Promise.resolve(!1)},nextFolder:function(){return o.currentFolderIndex<o.folders.length-1?(l(t),u(o.currentFolderIndex+1),Promise.resolve(!0)):Promise.resolve(!1)},previousFolder:function(){return 0<o.currentFolderIndex?(l(t),u(o.currentFolderIndex-1),Promise.resolve(!0)):Promise.resolve(!1)},nextFile:function(){return o.pausedTime=o.initialTime=(new Date).getTime(),l(t),Promise.resolve(!0)},previousFile:function(){return o.pausedTime=o.initialTime=(new Date).getTime(),l(t),Promise.resolve(!0)},playFolder:function(e){if("number"!=typeof e)return a();var r=function(e){for(var r=0;r<o.folders.length;r++)if(o.folders[r].number==e)return r;return-1}(e);return-1==r?Promise.resolve(!1):(l(t),u(r),Promise.resolve(!0))},setVolume:function(e,r){return"number"==typeof e?(r?o.volume+=e:o.volume=e,100<o.volume?o.volume=100:o.volume<0&&(o.volume=0),i({type:"volume-change",volume:o.volume}),Promise.resolve(!0)):a()},mute:function(){return e(!0),Promise.resolve(!0)},unmute:function(){return e(!1),Promise.resolve(!0)},toggleMute:function(){return e(!o.mute),Promise.resolve(!0)},seek:function(e,r){if("number"!=typeof e)return a();var t=s();if(r)(t+=e)>o.duration?t=o.duration:t<0&&(t=0);else{if(!(0<=e&&e<=o.duration))return Promise.resolve(!1);t=e}return o.initialTime=(new Date).getTime()-1e3*t,Promise.resolve(!0)},getState:function(){return Promise.resolve(o.state)},getFileName:function(){return Promise.resolve(o.filename)},getFolderName:function(){return Promise.resolve(o.folders[o.currentFolderIndex].name)},getStorageDevice:function(){return Promise.resolve("Fake storage device")},getFolderNumber:function(){return Promise.resolve(o.folders[o.currentFolderIndex].number)},getAllFolders:function(){return Promise.resolve(o.folders)},getPosition:function(){return Promise.resolve(s())},getRemainingTime:function(){return o.state==r?Promise.resolve(0):Promise.resolve(o.duration-s())},getDuration:function(){return o.state!=r?Promise.resolve(o.duration):Promise.resolve(0)},getVolume:function(){return Promise.resolve(o.volume)},getMute:function(){return Promise.resolve(o.mute)}}}function s(){}r.prototype={setOutputById:function(e,r){return"number"!=typeof e||"number"!=typeof r&&"boolean"!=typeof r?a():Promise.resolve(!0)},setOutputByMask:function(e,r){return"number"==typeof r&&"number"==typeof e?Promise.resolve(!0):a()},setInputConfiguration:function(e){if("object"==typeof e&&"string"==typeof e.controller)if("browser"===e.controller){var r=!1;if(void 0!==e.keymaps&&(r=void 0!==e.keymaps.combined&&!Array.isArray(e.keymaps.combined)||void 0!==e.keymaps.standalone&&!Array.isArray(e.keymaps.standalone)),e.lifetime)switch(e.lifetime){case"url":case"session":case"site":case"scenario":break;default:r=!0}if(!r)return Promise.resolve(!0)}else if("videoplayer"===e.controller)return Promise.resolve(!0);return a()},getInputByName:function(e){return"combined"===e?Promise.resolve({name:e,values:[!1,!1,!1,!1,!1,!1,!1,!1]}):"standalone"===e?Promise.resolve({name:e,values:[!1]}):a()}},t.prototype={sendFrame:function(e){if(void 0!==e){if(e.hasOwnProperty("data"))return Promise.resolve(!0);if(e.hasOwnProperty("id"))return Promise.resolve(!0)}return a()}},n.prototype={getState:function(){return Promise.resolve({connected:!0,online:!0,paper:"ready",cover:"closed"})},print:function(e){return e.url||e.data?(this.jobCounter++,o(this.jobCounter,"queued",void 0),o(this.jobCounter,"fetching",void 0),o(this.jobCounter,"printing",void 0),o(this.jobCounter,"printed",void 0),o(this.jobCounter,"finished",void 0),Promise.resolve(this.jobCounter)):a()},cancelJob:function(e){return"number"==typeof e?Promise.resolve(!0):a()},cancelAllJobs:function(){return Promise.resolve(!0)},getJobState:function(e){return"number"==typeof e?Promise.resolve(null):a()},getAllJobStates:function(){return Promise.resolve([])}},s.prototype={setDesktopMode:function(e){return"boolean"==typeof e?Promise.resolve(!0):a()}},-1==navigator.userAgent.search("WSPlayer")&&window.addEventListener("load",function(){console.warn("Using IDAL SDK stubbed implementation!");var u,e=new CustomEvent("idal-system-ready",{detail:{printer:new n,player:i(),browser:new s,logger:(u={},{log:function(e,r){if("string"==typeof e&&0<e.length&&void 0!==r){var t=u[e];return t||(u[e]=t=[]),t.push(r),200<t.length&&t.shift(),Promise.resolve(!0)}return a()},delete:function(e){return"string"==typeof e?u.hasOwnProperty(e)?(delete u[e],Promise.resolve(!0)):Promise.resolve(!1):a()},list:function(){var e=[];for(var r in u)e.push(r);return Promise.resolve(e)},stat:function(e){if("string"==typeof e&&u.hasOwnProperty(e)){for(var r=0,t=u[e],n=0;n<t.length;n++)r=r+t[n].length+1;return Promise.resolve({size:r})}return a()},read:function(e,r,t){if("string"==typeof e&&"number"==typeof r&&0<=r&&"number"==typeof t&&0<t&&u.hasOwnProperty(e)){for(var n="",o=0,i=u[e],s=0;s<i.length;s++)n+=i[s]+"\n",o+=i[s].length;return Promise.resolve({data:n,length:o})}return a()}}),contact:new r,serial:new t}});window.setTimeout(function(){window.dispatchEvent(e)},0)})}();